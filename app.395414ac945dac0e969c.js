"use strict";(self.webpackChunknodejs_template=self.webpackChunknodejs_template||[]).push([[524],{632:()=>{function t(t,e){let o=null,n="false";return{id:e,addDueDate:t=>o=t,setPriority:t=>n=t,getData:()=>({id:e,title:t,dueDate:o,priority:n}),addTitle:e=>t=e}}function e(t,e,o=Date.now()){let n="",i=[];return{id:e,createdAt:o,addTitle:e=>t=e,addDescription:t=>n=t,addToDo:t=>i.push(t),addToDos:t=>i=t,getToDos:()=>i,getToDo:t=>i.find(e=>e.id===t),deleteToDo:t=>{i=i.filter(e=>e.id!==t)},getData:()=>({id:e,title:t,description:n,createdAt:o,toDos:i.map(t=>t.getData())}),deleteToDos:()=>{i=[]}}}const o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const i=new Uint8Array(16),r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));function d(t,e,o){const d=(t=t||{}).random??t.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(i)}();if(d.length<16)throw new Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,e){if((o=o||0)<0||o+16>e.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let t=0;t<16;++t)e[o+t]=d[t];return e}return function(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}(d)}const l=function(t,e,n){return!o.randomUUID||e||t?d(t,e,n):o.randomUUID()},c="lockin_collections_master";function a(t){const e=u().find(e=>e.id===t);return e?h(e):null}function s(){const t=u().map(t=>h(t));return t.sort((t,e)=>t.getData().createdAt-e.getData().createdAt),t}function u(){try{const t=localStorage.getItem(c);return t?JSON.parse(t):[]}catch(t){return console.error("Storage retrieval error:",t),[]}}function p(t){try{localStorage.setItem(c,JSON.stringify(t))}catch(t){console.error("Storage save error:",t)}}function y(t,e){const o=a(t);return o?(void 0!==e.title&&o.addTitle(e.title),void 0!==e.description&&o.addDescription(e.description),m(o),o):null}function f(t){p(u().filter(e=>e.id!==t))}function D(t,e){const o=a(t);o&&(o.deleteToDo(e),m(o))}function g(t,e,o){const n=a(t);if(!n)return null;const i=n.getToDo(e);return i?(void 0!==o.title&&i.addTitle(o.title),void 0!==o.dueDate&&i.addDueDate(o.dueDate),void 0!==o.priority&&i.setPriority(o.priority),m(n),i):null}function h(o){const n=e(o.title,o.id,o.createdAt);return n.addDescription(o.description||""),o.toDos.forEach(e=>{const o=t(e.title,e.id);o.addDueDate(e.dueDate||null),o.setPriority(e.priority||"false"),n.addToDo(o)}),n}function m(t){const e=u(),o=t.getData(),n=e.findIndex(t=>t.id===o.id);-1!==n?e[n]=o:e.push(o),p(e)}const E=s();let b=null,v=null;function S(t){t.focus();const e=document.createRange();e.selectNodeContents(t),e.collapse(!1);const o=window.getSelection();o.removeAllRanges(),o.addRange(e)}!function o(n,i,r){const d=document.getElementById("collections"),c=document.getElementById("collection-box"),u=document.getElementById("todo-box");d.innerHTML="",n.forEach(e=>{const n=e.getData(),i=c.content.cloneNode(!0),r=i.querySelector(".collection-wrapper");i.querySelector(".collection-title").textContent=n.title,i.querySelector(".collection-description").textContent=n.description,r.dataset.id=n.id,n.id===b&&r.classList.add("anim-collection-pop");const p=i.querySelector(".collection-title"),h=i.querySelector(".collection-description");p.contentEditable=!0,p.setAttribute("placeholder","Collection Title"),p.addEventListener("input",()=>{let t=p.textContent;t.length>30&&(t=t.substring(0,30),p.textContent=t,S(p)),t.trim()&&y(n.id,{title:t.trim()})}),h.contentEditable=!0,h.setAttribute("placeholder","Description"),h.addEventListener("input",()=>{let t=h.textContent;t.length>30&&(t=t.substring(0,30),h.textContent=t,S(h)),y(n.id,{description:t.trim()})}),[p,h].forEach(t=>{t.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),t.blur())})}),p.addEventListener("blur",()=>{let t=p.textContent.trim();t?(y(n.id,{title:t}),o(s())):(f(n.id),o(s()))}),h.addEventListener("blur",()=>{let t=h.textContent.trim();y(n.id,{description:t})}),i.querySelector(".btn-delete-collection").addEventListener("click",()=>{f(n.id),o(s())});const E=i.querySelector(".todo-container"),C=[...n.toDos||[]];C.push({id:"new-task-placeholder-"+n.id,title:"",description:"",dueDate:"",priority:"false",isPlaceholder:!0}),C.forEach(e=>{const i=u.content.cloneNode(!0),r=i.querySelector(".todo-title"),d=i.querySelector(".todo-date-display"),c=i.querySelector(".todo-due-date"),p=i.querySelector(".btn-priority-toggle"),y=i.querySelector(".btn-date-trigger");var f;r.textContent=e.title,r.contentEditable=!0,r.dataset.id=e.id,r.setAttribute("placeholder",e.isPlaceholder?"Add Task...":"Task Title"),r.addEventListener("input",()=>{let t=r.textContent;t.length>30&&(t=t.substring(0,30),r.textContent=t,S(r)),!e.isPlaceholder&&t.trim()&&g(n.id,e.id,{title:t.trim()})}),r.addEventListener("keydown",t=>{"Enter"===t.key&&(t.preventDefault(),r.blur())}),e.isPlaceholder&&r.addEventListener("input",()=>{const e=r.textContent.trim();if(e){const i=function(e,o){const n=t(o.title,l());return n.addDueDate(o.dueDate||null),n.setPriority(o.priority||"false"),function(t,e){const o=a(e);if(!o)return null;o.addToDo(t),m(o)}(n,e),n}(n.id,{title:e,dueDate:"",priority:"false"});v=i.id,o(s(),null,i.id)}},{once:!0}),e.id===v&&i.querySelector(".todo-wrapper").classList.add("anim-task-slide-down"),r.addEventListener("blur",()=>{let t=r.textContent.trim();t?e.isPlaceholder||(g(n.id,e.id,{title:t}),o(s())):e.isPlaceholder||(D(n.id,e.id),o(s()))}),e.dueDate?d.textContent=e.dueDate:d.textContent="",y.addEventListener("click",()=>{c.showPicker()}),c.value=e.dueDate||"",c.addEventListener("change",()=>{const t=c.value;g(n.id,e.id,{dueDate:t}),o(s())}),f=e.priority,p.textContent="true"===f?"★":"☆","true"===f?p.classList.add("high-priority"):p.classList.remove("high-priority"),p.addEventListener("click",()=>{const t="true"===e.priority?"false":"true";g(n.id,e.id,{priority:t}),o(s())});const h=i.querySelector(".btn-delete-todo");e.isPlaceholder?(y.style.display="none",p.style.display="none",h.style.display="none"):h.addEventListener("click",()=>{D(n.id,e.id),o(s())}),E.appendChild(i)}),d.appendChild(i)});const p=document.getElementById("add-collection-box").content.cloneNode(!0),h=p.querySelector(".add-collection-btn");if(h&&h.addEventListener("click",()=>{try{const n=function(o){const n=l(),i=e(o.title,n);return i.addDescription(o.description||""),Array.isArray(o.toDos)&&o.toDos.forEach(e=>{const o=t(e.title,l());o.addDueDate(e.dueDate),o.setPriority(e.priority),i.addToDo(o)}),m(i),i}({title:"",description:"",toDos:[]});b=n.id,o(s(),n.id)}catch(t){alert("Error: "+t.message)}}),n.some(t=>""===t.getData().title)||d.appendChild(p),i){const t=document.querySelector(`.collection-wrapper[data-id="${i}"]`);if(t){const e=t.querySelector(".collection-title");e&&S(e)}}if(r){const t=document.querySelector(`.todo-title[data-id="${r}"]`);t&&S(t)}b=null,v=null}(E)}},t=>{t(t.s=632)}]);